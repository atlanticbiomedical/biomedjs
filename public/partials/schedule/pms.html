<ul class="breadcrumb">
	<li><a href="/clients"><i class="icon-briefcase"></i> Schedule</a><li>
</ul>
<header>
	<h1>Preventive Maintenance</h1>
</header>

<div class="row-fluid">
	<div class="span12">
		<div class="toolbelt">
			<a href="/clients/add" class="btn btn-primary"  ng-show="accountHasPermission('system.edit')">Create new Workorder</a>
				<span class="toolbelt-text">Frequency:</span>
					<select ng-model="frequency" name="frequency" class="input-xlarge">
						<option value="">All</option>
						<option ng-repeat="f in frequencies" value="{{f}}">{{f}}</option>
					</select>
			<div class="pull-right">
				<span class="toolbelt-text">Month:</span>
			        <div class="input-append">
					<select ng-model="month" name="month" class="input-xlarge">
						<option value="0">January</option>
						<option value="1">February</option>
						<option value="2">March</option>
						<option value="3">April</option>
						<option value="4">May</option>
						<option value="5">June</option>
						<option value="6">July</option>
						<option value="7">August</option>
						<option value="8">September</option>
						<option value="9">October</option>
						<option value="10">November</option>
						<option value="11">December</option>
					</select>
		            		<span class="add-on"><i class="icon-calendar"></i></span>
	            		</div>
			</div>
		</div>
		<table class="biomed-table" infinite-scroll="addItems()" can-load="canLoad" threshold="300">
			<thead>
				<tr>
					<th style="width: 18%" ng-class="selectedCls('client.name')"  ng-click="changeSorting('client.name')">Client Name</th>
					<th style="width: 50%" ng-class="selectedCls('reason')"  ng-click="changeSorting('reason')">Frequency</th>
					<th style="width: 20%" ng-class="selectedCls('client.contacts[0].name')"  ng-click="changeSorting('client.contacts[0].name')">Contact</th>
					<th style="width: 12%" ng-class="selectedCls('client.contacts[0].phone')"  ng-click="changeSorting('client.contacts[0].phone')">Phone</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-show="loading"><td colspan="4" class="table-loading"><i class="loader"></i></td></tr>
				<tr ng-hide="loading || pms.length"><td colspan="4" class="table-message">There is no information to display.</td></tr>
				<tr ng-hide="loading" ng-repeat="pm in pms | orderBy : sort.column : sort.descending">
					<td colspan="2">
						{{pm.client.name}} ({{pm.client.identifier | uppercase}})<br>
						<span ng-repeat="reason in pm.reason">
							<a ng-href="/workorders/add?workorderType=pm&amp;clientId={{pm.client._id}}&amp;type={{reason}}">{{reason}}</a><span ng-show="!$last">, </span>
						</span>
					</td>
					<td>{{pm.client.contacts[0].name}}</td>
					<td>{{pm.client.contacts[0].phone}}</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
